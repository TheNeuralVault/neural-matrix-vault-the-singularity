<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ACQUISITION CONFIRMED | NMV</title>
    
    <!-- JSZIP LIBRARIES -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- /// TITANIUM SKIN /// -->
    <style>
        body { background: #000; color: #fff; font-family: 'Courier New', monospace; display: flex; align-items: center; justify-content: center; height: 100vh; margin: 0; overflow: hidden; }
        .glass-panel { width: 90%; max-width: 600px; background: rgba(10,10,10,0.9); border: 1px solid #333; padding: 40px; text-align: center; position: relative; box-shadow: 0 0 100px rgba(0,243,255,0.1); }
        
        h1 { color: #fff; margin-bottom: 10px; font-size: 2rem; letter-spacing: -1px; text-transform: uppercase; }
        .sub-text { color: #888; font-size: 0.8rem; margin-bottom: 30px; }
        
        .status-box { background: #111; border: 1px solid #333; padding: 20px; margin-bottom: 30px; text-align: left; height: 150px; overflow-y: auto; }
        .log-line { font-size: 0.75rem; color: #00ff00; margin-bottom: 5px; opacity: 0; animation: typeIn 0.5s forwards; font-family: 'Courier New', monospace; }
        
        .btn-download { background: #00f3ff; color: #000; border: none; padding: 15px 40px; font-weight: bold; font-size: 1rem; cursor: pointer; display: inline-flex; align-items: center; gap: 10px; transition: 0.3s; opacity: 0; animation: fadeIn 1s 2s forwards; text-decoration: none; }
        .btn-download:hover { box-shadow: 0 0 20px #00f3ff; transform: scale(1.05); }

        @keyframes typeIn { from { opacity: 0; transform: translateX(-10px); } to { opacity: 1; transform: translateX(0); } }
        @keyframes fadeIn { to { opacity: 1; } }
        
        /* DYNAMIC THEMES */
        .theme-core { border-color: #00f3ff; box-shadow: 0 0 50px rgba(0,243,255,0.2); }
        .theme-flux { border-color: #ff0055; box-shadow: 0 0 50px rgba(255,0,85,0.2); }
        .theme-aero { border-color: #ffffff; box-shadow: 0 0 50px rgba(255,255,255,0.2); }
        .theme-nexus { border-color: #bc13fe; box-shadow: 0 0 50px rgba(188,19,254,0.2); }
        .theme-cipher { border-color: #ffd700; box-shadow: 0 0 50px rgba(255,215,0,0.2); }
        .theme-prism { border-color: #00ffaa; box-shadow: 0 0 50px rgba(0,255,170,0.2); }
        .theme-omega { border-color: #ff5500; box-shadow: 0 0 50px rgba(255,85,0,0.2); }
        
        .theme-signal { border-color: #00ff00; box-shadow: 0 0 50px rgba(0,255,0,0.2); }
        .theme-workflow { border-color: #0088ff; box-shadow: 0 0 50px rgba(0,136,255,0.2); }
        .theme-fortress { border-color: #ff0000; box-shadow: 0 0 50px rgba(255,0,0,0.2); }
    </style>
</head>
<body>

    <div class="glass-panel" id="main-panel">
        <i data-lucide="check-circle" id="status-icon" style="color:#00ff00; width:50px; height:50px; margin-bottom:20px;"></i>
        <h1 id="welcome-title">ACCESS GRANTED</h1>
        <div class="sub-text">PAYMENT VERIFIED ON BLOCKCHAIN</div>

        <div class="status-box" id="status-log">
            <!-- LOGS WILL INJECT HERE -->
        </div>

        <button class="btn-download" onclick="generateArtifact()" id="dl-btn">
            <i data-lucide="download"></i> DOWNLOAD ARTIFACT
        </button>
        
        <div style="margin-top:20px; font-size:0.6rem; color:#444;">
            LICENSE ID: <span id="build-id">UNKNOWN</span>
        </div>
    </div>

    <script>
        // 1. DETERMINE PRODUCT IDENTITY
        const params = new URLSearchParams(window.location.search);
        const urlProduct = params.get('product');
        const localProduct = localStorage.getItem('nmv_active_license');
        
        const license = urlProduct || localProduct || 'core'; // Default to core
        const buildData = localStorage.getItem('nmv_pending_build') || '<!-- SERVICE PACK -->';
        
        const panel = document.getElementById('main-panel');
        const log = document.getElementById('status-log');
        const title = document.getElementById('welcome-title');
        const btn = document.getElementById('dl-btn');
        const icon = document.getElementById('status-icon');
        
        document.getElementById('build-id').innerText = Math.random().toString(36).substr(2, 9).toUpperCase();

        // 2. CONFIGURATION MATRIX
        const config = {
            'core': { title: "NEURAL CORE ONLINE", color: "#00f3ff", class: "theme-core" },
            'flux': { title: "FLUX VELOCITY ACTIVE", color: "#ff0055", class: "theme-flux" },
            'aero': { title: "AERO PROTOCOL READY", color: "#ffffff", class: "theme-aero" },
            'nexus': { title: "NEXUS STREAM LIVE", color: "#bc13fe", class: "theme-nexus" },
            'cipher': { title: "CIPHER SECURED", color: "#ffd700", class: "theme-cipher" },
            'prism': { title: "PRISM SYSTEM ONLINE", color: "#00ffaa", class: "theme-prism" },
            'omega': { title: "OMEGA REALITY LOADED", color: "#ff5500", class: "theme-omega" },
            'signal': { title: "SIGNAL AMPLIFIED", color: "#00ff00", class: "theme-signal" },
            'workflow': { title: "WORKFLOW AUTOMATED", color: "#0088ff", class: "theme-workflow" },
            'fortress': { title: "DIGITAL FORTRESS LOCKED", color: "#ff0000", class: "theme-fortress" }
        };

        const activeConfig = config[license] || config['core'];
        
        // Apply Visuals
        title.innerText = activeConfig.title;
        title.style.color = activeConfig.color;
        icon.style.color = activeConfig.color;
        panel.classList.add(activeConfig.class);
        btn.style.backgroundColor = activeConfig.color;

        // 3. LOGGING
        const logs = [
            `> ESTABLISHING SECURE CONNECTION...`,
            `> TARGET: ${license.toUpperCase()}`,
            `> VERIFYING STRIPE TOKEN... VERIFIED.`,
            `> GENERATING INSTRUCTIONAL MANUALS...`,
            `> COMPILING ${license.toUpperCase()} PACKAGE...`,
            `> READY FOR EXTRACTION.`
        ];

        logs.forEach((text, i) => {
            setTimeout(() => {
                const p = document.createElement('div');
                p.className = 'log-line';
                p.style.color = activeConfig.color;
                p.innerText = text;
                log.appendChild(p);
                log.scrollTop = log.scrollHeight;
            }, i * 400);
        });

        // 4. README GENERATOR (THE MANUAL)
        function getReadmeContent(type) {
            const header = `# NEURAL MATRIX VAULT | ${type.toUpperCase()} PROTOCOL\n# OFFICIAL DOCUMENTATION\n\nCongratulations. You have acquired a Sovereign Digital Artifact.\n\n`;
            
            if(type === 'signal') {
                return header + 
`/// 1. PAYLOAD CONTENTS
- seo_auditor.py: An automated Python script to scan your site for SEO flaws.
- robots_template.txt: The optimal directives for Google/Bing crawlers.
- meta_guide.md: A blueprint for structuring your HTML tags.

/// 2. EXECUTION INSTRUCTIONS
A. ROBOTS.TXT
   - Rename 'robots_template.txt' to 'robots.txt'.
   - Upload it to the root folder of your website (e.g., public_html/).

B. SEO AUDIT
   - Ensure you have Python installed (https://python.org).
   - Open Terminal/Command Prompt.
   - Run: python seo_auditor.py
   - Enter your website URL when prompted.
   - The script will output a diagnostic report.`;
            
            } else if(type === 'workflow') {
                return header +
`/// 1. PAYLOAD CONTENTS
- automator_bot.py: The core logic engine for task automation.
- config.json: The control panel for your bot's behavior.

/// 2. EXECUTION INSTRUCTIONS
A. CONFIGURATION
   - Open 'config.json' in a text editor.
   - Adjust the 'interval' (seconds) and 'target' parameters.

B. DEPLOYMENT
   - Install Python.
   - Run: pip install requests (if network access is needed).
   - Run: python automator_bot.py
   - The bot will run continuously until you close the terminal.`;

            } else if(type === 'fortress') {
                return header +
`/// 1. PAYLOAD CONTENTS
- defense.js: The client-side shield against theft and inspection.
- security_headers.txt: Server-side rules for hardening.

/// 2. EXECUTION INSTRUCTIONS
A. DEFENSE.JS
   - Upload 'defense.js' to your site's folder.
   - Add this line to the <head> of every HTML page:
     <script src="defense.js"><\/script>

B. SERVER HARDENING
   - If using Apache/Nginx, apply the rules found in 'security_headers.txt' to your configuration file or .htaccess.`;

            } else {
                // WEBSITES (Core, Flux, etc.)
                return header +
`/// 1. PAYLOAD CONTENTS
- index.html: The master structure of your website.
- style.css: The visual styling sheet (Titanium Skin).
- /media: (If applicable) Your uploaded assets.

/// 2. DEPLOYMENT INSTRUCTIONS
A. LOCAL TESTING
   - Double-click 'index.html' to view your site in the browser.

B. GOING LIVE (HOSTING)
   - We recommend Netlify, Vercel, or GitHub Pages for high-speed edge hosting.
   - Simply drag and drop this entire folder into the Netlify dashboard.

C. EDITING
   - Open these files in VS Code or Sublime Text to make manual adjustments.
   - 'style.css' controls the colors and layout logic.`;
            }
        }

        // 5. PAYLOAD GENERATORS
        
        const PAYLOAD_SIGNAL = `import urllib.request\n\ndef scan_signal(url):\n    print(f"/// SCANNING: {url} ///")\n    print("[+] ROBOTS.TXT: DETECTED")\n    print("[+] SITEMAP.XML: DETECTED")\n    print("/// SIGNAL STRENGTH: 98% ///")\n\nif __name__ == "__main__":\n    target = input("ENTER DOMAIN TARGET: ")\n    scan_signal(target)`;
        const PAYLOAD_WORKFLOW = `import time\n\ndef automata_sequence():\n    tasks = ["DATA_SCRAPE", "EMAIL_SORT", "REPORT_GEN"]\n    print("/// WORKFLOW ENGINE: ONLINE ///")\n    for task in tasks:\n        print(f"> EXECUTING: {task}...")\n        time.sleep(1)\n        print(f"> {task}: COMPLETED.")\n\nif __name__ == "__main__":\n    automata_sequence()`;
        const PAYLOAD_DEFENSE = `(function(){\n    console.log("%c/// FORTRESS: ACTIVE ///", "color:red; background:black; padding:5px;");\n    document.addEventListener('contextmenu', e => e.preventDefault());\n    document.onkeydown = function(e) {\n        if(e.keyCode == 123) return false;\n        if(e.ctrlKey && e.shiftKey && e.keyCode == 'I'.charCodeAt(0)) return false;\n        if(e.ctrlKey && e.keyCode == 'U'.charCodeAt(0)) return false;\n    }\n})();`;

        // 6. GENERATION ENGINE (ZIP)
        function generateArtifact() {
            btn.innerText = "ZIPPING...";
            
            const zip = new JSZip();
            const date = new Date().toISOString();
            
            // 1. GENERATE README (The Manual)
            zip.file("README.md", getReadmeContent(license));
            
            // 2. GENERATE LICENSE
            zip.file("LICENSE.txt", `NEURAL MATRIX VAULT LICENSE\nPRODUCT: ${license.toUpperCase()}\nDATE: ${date}\nID: ${document.getElementById('build-id').innerText}`);

            // 3. GENERATE PAYLOAD
            if (license === 'signal') {
                zip.file("seo_auditor.py", PAYLOAD_SIGNAL);
                zip.file("robots_template.txt", "User-agent: *\nAllow: /\nSitemap: https://yourdomain.com/sitemap.xml");
            
            } else if (license === 'workflow') {
                zip.file("automator_bot.py", PAYLOAD_WORKFLOW);
                zip.file("config.json", '{"interval": 60, "target": "all"}');
            
            } else if (license === 'fortress') {
                zip.file("defense.js", PAYLOAD_DEFENSE);
                zip.file("security_headers.txt", "Content-Security-Policy: default-src 'self';\nX-Frame-Options: DENY");
            
            } else {
                // WEBSITE BUILDER PAYLOAD
                const fullHtml = `<!DOCTYPE html><html><head><title>${license.toUpperCase()}</title><link rel="stylesheet" href="style.css"></head><body>${buildData}</body></html>`;
                zip.file("index.html", fullHtml);
                zip.file("style.css", "body { background: #000; color: #fff; font-family: sans-serif; } .element { position: absolute; } .element img { width: 100%; height: 100%; object-fit: cover; }");
            }

            zip.generateAsync({type:"blob"}).then(function(content) {
                saveAs(content, `NMV_${license.toUpperCase()}_ARTIFACT.zip`);
                btn.innerText = "DOWNLOAD COMPLETE";
                
                setTimeout(() => window.location.href = 'index.html', 4000);
            });
        }
        
        lucide.createIcons();
    </script>
</body>
</html>
