<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ACQUISITION CONFIRMED | NMV</title>
    
    <!-- JSZIP LIBRARIES FOR CLIENT-SIDE GENERATION -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        body { background: #000; color: #fff; font-family: 'Courier New', monospace; display: flex; align-items: center; justify-content: center; height: 100vh; margin: 0; overflow: hidden; }
        .glass-panel { width: 90%; max-width: 600px; background: rgba(10,10,10,0.9); border: 1px solid #333; padding: 40px; text-align: center; position: relative; box-shadow: 0 0 100px rgba(0,243,255,0.1); }
        
        h1 { color: #fff; margin-bottom: 10px; font-size: 2rem; letter-spacing: -1px; }
        .sub-text { color: #888; font-size: 0.8rem; margin-bottom: 30px; }
        
        .status-box { background: #111; border: 1px solid #333; padding: 20px; margin-bottom: 30px; text-align: left; }
        .log-line { font-size: 0.75rem; color: #00ff00; margin-bottom: 5px; opacity: 0; animation: typeIn 0.5s forwards; }
        
        .btn-download { background: #00f3ff; color: #000; border: none; padding: 15px 40px; font-weight: bold; font-size: 1rem; cursor: pointer; display: inline-flex; align-items: center; gap: 10px; transition: 0.3s; opacity: 0; animation: fadeIn 1s 2s forwards; }
        .btn-download:hover { box-shadow: 0 0 20px #00f3ff; transform: scale(1.05); }

        @keyframes typeIn { from { opacity: 0; transform: translateX(-10px); } to { opacity: 1; transform: translateX(0); } }
        @keyframes fadeIn { to { opacity: 1; } }
        
        /* DYNAMIC THEMES */
        .theme-core { border-color: #00f3ff; }
        .theme-flux { border-color: #ff0055; }
        .theme-signal { border-color: #00ff00; }
        .theme-fortress { border-color: #ffd700; }
    </style>
</head>
<body>

    <div class="glass-panel" id="main-panel">
        <i data-lucide="check-circle" style="color:#00ff00; width:50px; height:50px; margin-bottom:20px;"></i>
        <h1 id="welcome-title">ACCESS GRANTED</h1>
        <div class="sub-text">PAYMENT VERIFIED ON BLOCKCHAIN</div>

        <div class="status-box" id="status-log">
            <!-- LOGS WILL INJECT HERE -->
        </div>

        <button class="btn-download" onclick="generateArtifact()">
            <i data-lucide="download"></i> DOWNLOAD ARTIFACT
        </button>
        
        <div style="margin-top:20px; font-size:0.6rem; color:#444;">
            BUILD ID: <span id="build-id">UNKNOWN</span>
        </div>
    </div>

    <script>
        // 1. READ TELEPATHY DATA
        const license = localStorage.getItem('nmv_active_license') || 'core'; // Default to core if unknown
        const buildData = localStorage.getItem('nmv_pending_build') || '<!-- NO DATA FOUND -->';
        const panel = document.getElementById('main-panel');
        const log = document.getElementById('status-log');
        const title = document.getElementById('welcome-title');
        
        document.getElementById('build-id').innerText = Date.now().toString(36).toUpperCase();

        // 2. CONFIGURE THEME BASED ON PRODUCT
        const config = {
            'core': { title: "NEURAL CORE ONLINE", color: "#00f3ff", class: "theme-core" },
            'flux': { title: "FLUX VELOCITY ACTIVE", color: "#ff0055", class: "theme-flux" },
            'signal': { title: "SIGNAL AMPLIFIED", color: "#00ff00", class: "theme-signal" },
            'fortress': { title: "FORTRESS SECURED", color: "#ffd700", class: "theme-fortress" }
        };

        const activeConfig = config[license] || config['core'];
        
        // Apply Visuals
        title.innerText = activeConfig.title;
        title.style.color = activeConfig.color;
        panel.classList.add(activeConfig.class);

        // 3. RUN INITIALIZATION LOGS
        const logs = [
            `> CONNECTING TO ${license.toUpperCase()} SERVER...`,
            `> VERIFYING STRIPE TOKEN... OK.`,
            `> RETRIEVING ARCHITECTURE FROM CACHE...`,
            `> COMPILING ASSETS...`,
            `> READY FOR EXTRACTION.`
        ];

        logs.forEach((text, i) => {
            setTimeout(() => {
                const p = document.createElement('div');
                p.className = 'log-line';
                p.innerText = text;
                log.appendChild(p);
            }, i * 400);
        });

        // 4. GENERATION ENGINE
        function generateArtifact() {
            const btn = document.querySelector('.btn-download');
            btn.innerText = "ZIPPING...";
            
            const zip = new JSZip();
            
            // CONSTRUCT THE WEBSITE
            const fullHtml = `
<!DOCTYPE html>
<html>
<head>
    <title>NEURAL EXPORT</title>
    <style>body{margin:0; background:#000; color:#fff; font-family:sans-serif;}</style>
</head>
<body>
    ${buildData}
</body>
</html>`;

            zip.file("index.html", fullHtml);
            zip.file("style.css", "body { background: #000; }");
            zip.file("LICENSE.txt", `AUTHORIZED FOR: ${license.toUpperCase()}\nDATE: ${new Date().toISOString()}`);

            zip.generateAsync({type:"blob"}).then(function(content) {
                saveAs(content, `NMV_${license.toUpperCase()}_ARTIFACT.zip`);
                btn.innerText = "DOWNLOAD COMPLETE";
                setTimeout(() => window.location.href = 'index.html', 3000);
            });
        }
        
        lucide.createIcons();
    </script>
</body>
</html>
